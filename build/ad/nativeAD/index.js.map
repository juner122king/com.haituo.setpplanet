{"version":3,"file":"ad\\nativeAD\\index.js","mappings":";;;;;;;;;;;;;;AAyGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC/RA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;ACnFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;AC3HA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACvBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sources":["webpack:///./src/ad/nativeAD/index.ux","webpack:///./src/ad/nativeAD/index.ux?2358","webpack:///./src/ad/nativeAD/index.ux?6e86","webpack:///webpack/bootstrap","webpack:///./src/ad/nativeAD/index.ux?0702"],"sourcesContent":["<template>\r\n  <div class=\"item-container\">\r\n    <image style=\"width: 528px; height: 708px\" src=\"/Common/img/ad/icon_gx.png\"></image>\r\n    <image style=\"width: 340px; height: 94px\" src=\"/Common/img/ad/bt_cpd.png\" onclick=\"completeAdRSA\"></image>\r\n    <div if=\"native.isShow\" class=\"container\">\r\n      <image class=\"closeImg\" src=\"/Common/img/ad/icon_x.png\" onclick=\"closeAd\"></image>\r\n      <video id=\"video\" if=\"native.isShowVideo\" src=\"{{native.adVideoSrc}}\" autoplay=\"true\" onclick=\"reportNativeClick()\" class=\"ad-video\"></video>\r\n      <stack class=\"stackstyle\" onclick=\"reportNativeClick()\">\r\n        <image if=\"native.isShowImg\" class=\"img\" src=\"{{native.adImgSrc}}\"></image>\r\n        <ad-button class=\"adbtn\" onclick=\"startButton()\" valuetype=\"0\" adunitid=\"{{native.adUnitId}}\" adid=\"{{native.adData.adId}}\"></ad-button>\r\n        <text class=\"adsource\">{{ native.adData.source }} 广告</text>\r\n        <text class=\"adtitle\">{{ native.adData.title }}</text>\r\n      </stack>\r\n    </div>\r\n  </div>\r\n</template>\r\n<style>\r\n  .item-container {\r\n    width: 100%;\r\n    height: 100%;\r\n    background-color: rgba(0, 0, 0, 0.5);\r\n    justify-content: center;\r\n    align-items: center;\r\n    flex-direction: column;\r\n    position: fixed;\r\n    top: 0;\r\n    left: 0;\r\n  }\r\n  .container {\r\n    flex-direction: column;\r\n    align-items: flex-end;\r\n  }\r\n  .stackstyle {\r\n    width: 540px;\r\n    height: 306px;\r\n    align-items: flex-end;\r\n  }\r\n  .img {\r\n    width: 100%;\r\n    height: 100%;\r\n    border-radius: 20px;\r\n  }\r\n  .closeImg {\r\n    margin-bottom: 30px;\r\n    width: 48px;\r\n    height: 48px;\r\n  }\r\n  .alert {\r\n    font-size: 40px;\r\n    margin-top: 20px;\r\n    margin-bottom: 20px;\r\n  }\r\n\r\n  .ad-video {\r\n    width: 100%;\r\n    height: 415px;\r\n  }\r\n  .btn {\r\n    height: 80px;\r\n    width: 60%;\r\n    background-color: #00bfff;\r\n    color: #ffffff;\r\n    border-radius: 20px;\r\n    margin-bottom: 20px;\r\n  }\r\n  .btn:active {\r\n    background-color: #058fbd;\r\n  }\r\n  .adbtn {\r\n    width: 200px;\r\n    height: 50px;\r\n    color: #ffffff;\r\n    background-color: #00bfff;\r\n    border-radius: 8px;\r\n    position: absolute;\r\n    align-self: flex-end;\r\n    bottom: 20px;\r\n    right: 20px;\r\n  }\r\n  .adbtn:active {\r\n    background-color: #058fbd;\r\n  }\r\n  .adsource {\r\n    background-color: rgba(0, 0, 0, 0.5);\r\n    padding: 5px;\r\n    color: #ffffff;\r\n    position: absolute;\r\n    top: 0;\r\n    font-size: 18px;\r\n    border-top-left-radius: 20px;\r\n    padding-left: 10px;\r\n    padding-right: 10px;\r\n  }\r\n  .adtitle {\r\n    background-color: rgba(0, 0, 0, 0.5);\r\n    padding: 5px;\r\n    color: #ffffff;\r\n    font-size: 18px;\r\n    padding-left: 10px;\r\n    padding-right: 10px;\r\n    border-bottom-left-radius: 20px;\r\n  }\r\n</style>\r\n<script>\r\n  let nativeAd;\r\n  module.exports = {\r\n    data: {\r\n      componentName: \"ad\",\r\n      provider: \"\",\r\n      native: {\r\n        adUnitId: \"\",\r\n        isShow: false,\r\n        adData: {},\r\n        isShowImg: true,\r\n        isShowVideo: true,\r\n        isShowData: true,\r\n        errStr: \"\",\r\n        btnTxt: \"\",\r\n        adImgSrc: \"\",\r\n        adVideoSrc: \"\"\r\n      }\r\n\r\n    },\r\n    onInit() {\r\n\r\n      this.native.adUnitId = this.$app.$def.dataApp.nativeAdUnitId;\r\n\r\n    },\r\n    async onReady(options) {\r\n      console.info(\"native ad onReady\");\r\n\r\n      const storageFlag = await $processData.getStorage(\"_PRIVAC\");\r\n      if (storageFlag) {\r\n        this.showNativeAd();\r\n      } else {   //未授权，弹出授权询问\r\n        console.log('用户授权= ', storageFlag);\r\n        console.log('未授权,不加载原生广告');\r\n      }\r\n\r\n    },\r\n    onShow(options) {\r\n      if (this.native.isShow) {\r\n        this.reportNativeShow();\r\n      }\r\n    },\r\n    getAdProvider: function () {\r\n      this.provider = $ad.getProvider();\r\n\r\n    },\r\n    isDownloadAd(creativeType) {\r\n      let downloadTypes = [103, 106, 107, 108, 101, 102, 110];\r\n      return downloadTypes.includes(creativeType);\r\n    },\r\n    showNativeAd() {\r\n      var that = this;\r\n      this.getAdProvider();\r\n      if (this.provider !== \"huawei\") {\r\n        console.info(\"the device  does not support ad.\");\r\n        return;\r\n      }\r\n      nativeAd = $ad.createNativeAd({ adUnitId: this.native.adUnitId });\r\n      nativeAd.onLoad(data => {\r\n        console.info(\"ad data loaded: \" + JSON.stringify(data));\r\n        this.native.adData = data.adList[0];\r\n        if (this.native.adData) {\r\n          if (this.native.adData.imgUrlList) {\r\n            this.native.adImgSrc = this.native.adData.imgUrlList[0];\r\n            console.info(\" this.native.adImgSrc =\" + this.native.adImgSrc);\r\n            this.native.isShowImg = true;\r\n          } else {\r\n            this.native.isShowImg = false;\r\n            this.native.adImgSrc = \"\";\r\n          }\r\n          if (this.native.adData.clickBtnTxt) {\r\n            this.native.btnTxt = this.native.adData.clickBtnTxt;\r\n          } else {\r\n            this.native.btnTxt = \"\";\r\n          }\r\n          if (this.native.adData.videoUrlList && this.native.adData.videoUrlList[0]) {\r\n            this.native.adVideoSrc = this.native.adData.videoUrlList[0];\r\n            this.native.isShowVideo = true;\r\n          } else {\r\n            this.native.isShowVideo = false;\r\n            this.native.adVideoSrc = \"\";\r\n          }\r\n          this.native.isShow = true;\r\n          this.native.errStr = \"\";\r\n          this.reportNativeShow();\r\n        }\r\n      });\r\n      nativeAd.onError(e => {\r\n        console.error(\"load ad error:\" + JSON.stringify(e));\r\n        this.native.isShowImg = false;\r\n        this.native.isShowVideo = false;\r\n        this.native.isShow = false;\r\n        this.native.errStr = JSON.stringify(e);\r\n      });\r\n      nativeAd.load();\r\n    },\r\n    reportNativeShow() {\r\n      if (nativeAd) {\r\n        nativeAd.reportAdShow({ adId: this.native.adData.adId });\r\n      }\r\n    },\r\n    reportNativeClick() {\r\n      console.info(\" 原生广告被点击了\" );\r\n      nativeAd.reportAdClick({\r\n        adId: this.native.adData.adId\r\n      });\r\n\r\n      //转化上传\r\n      $utils.getConvertUpload()\r\n      \r\n    },\r\n    listenNativeAdDownloadStatus(downloadstatus) {\r\n      if (downloadstatus === \"INSTALLED\") {\r\n        this.native.btnTxt = \"OPEN\";\r\n      }\r\n    },\r\n    startButton(event) {\r\n      console.error('start download result is = ', event.resultCode)\r\n    },\r\n    removeAdListen: function () {\r\n      if (nativeAd) {\r\n        nativeAd.offDownloadProgress();\r\n        nativeAd.offError(() => {\r\n          console.log(\"nativeAd offError\");\r\n        });\r\n        nativeAd.offLoad(() => {\r\n          console.log(\"nativeAd offLoad\");\r\n        });\r\n        nativeAd.offStatusChanged();\r\n      }\r\n    },\r\n    onDestroy() {\r\n      if (nativeAd) {\r\n        nativeAd.destroy();\r\n      }\r\n    },\r\n    closeAd: function () {\r\n      this.native.isShow = false;\r\n    },\r\n\r\n    completeAdRSA() {\r\n      console.log('点击拆福袋');\r\n\r\n      var adType = 'NATIVE'\r\n      var adId = this.native.adUnitId\r\n      var channel = ''\r\n\r\n      // 构建参数对象\r\n      const params = {\r\n        adType,\r\n        adId,\r\n        channel,\r\n      };\r\n\r\n      $apis.example.completeAdRSA(params).then((res) => {\r\n        this.$emit('emitEvt', {\r\n          count: res.data.count\r\n        })\r\n        console.log(`完成广告----------> 完成次数：${res.data.count} 当次奖励：${res.data.awardAmount}`);\r\n        var mes = ''\r\n        if (res.data.awardAmount) {\r\n          mes = '恭喜获得0.01元红包'\r\n        } else {\r\n          if (res.data.count > 8) {\r\n            mes = '今天活动次数已用完'\r\n          } else {\r\n            mes = '再来一次'\r\n          }\r\n        }\r\n        $prompt.showToast({\r\n          message: mes,\r\n          gravity: 'center'\r\n        })\r\n      }).catch(err => {\r\n        console.log(err, '点击拆福袋错误');\r\n        $prompt.showToast({\r\n          message: JSON.parse(err).message,\r\n          gravity: 'center'\r\n        });\r\n      });\r\n    }\r\n\r\n\r\n  };\r\n</script>","module.exports = {\n  \".item-container\": {\n    \"width\": \"100%\",\n    \"height\": \"100%\",\n    \"backgroundColor\": \"rgba(0,0,0,0.5)\",\n    \"justifyContent\": \"center\",\n    \"alignItems\": \"center\",\n    \"flexDirection\": \"column\",\n    \"position\": \"fixed\",\n    \"top\": \"0px\",\n    \"left\": \"0px\"\n  },\n  \".container\": {\n    \"flexDirection\": \"column\",\n    \"alignItems\": \"flex-end\"\n  },\n  \".stackstyle\": {\n    \"width\": \"540px\",\n    \"height\": \"306px\",\n    \"alignItems\": \"flex-end\"\n  },\n  \".img\": {\n    \"width\": \"100%\",\n    \"height\": \"100%\",\n    \"borderRadius\": \"20px\"\n  },\n  \".closeImg\": {\n    \"marginBottom\": \"30px\",\n    \"width\": \"48px\",\n    \"height\": \"48px\"\n  },\n  \".alert\": {\n    \"fontSize\": \"40px\",\n    \"marginTop\": \"20px\",\n    \"marginBottom\": \"20px\"\n  },\n  \".ad-video\": {\n    \"width\": \"100%\",\n    \"height\": \"415px\"\n  },\n  \".btn\": {\n    \"height\": \"80px\",\n    \"width\": \"60%\",\n    \"backgroundColor\": \"#00bfff\",\n    \"color\": \"#ffffff\",\n    \"borderRadius\": \"20px\",\n    \"marginBottom\": \"20px\",\n    \"backgroundColor:active\": \"#058fbd\"\n  },\n  \".adbtn\": {\n    \"width\": \"200px\",\n    \"height\": \"50px\",\n    \"color\": \"#ffffff\",\n    \"backgroundColor\": \"#00bfff\",\n    \"borderRadius\": \"8px\",\n    \"position\": \"absolute\",\n    \"alignSelf\": \"flex-end\",\n    \"bottom\": \"20px\",\n    \"right\": \"20px\",\n    \"backgroundColor:active\": \"#058fbd\"\n  },\n  \".adsource\": {\n    \"backgroundColor\": \"rgba(0,0,0,0.5)\",\n    \"paddingTop\": \"5px\",\n    \"paddingRight\": \"10px\",\n    \"paddingBottom\": \"5px\",\n    \"paddingLeft\": \"10px\",\n    \"color\": \"#ffffff\",\n    \"position\": \"absolute\",\n    \"top\": \"0px\",\n    \"fontSize\": \"18px\",\n    \"borderTopLeftRadius\": \"20px\"\n  },\n  \".adtitle\": {\n    \"backgroundColor\": \"rgba(0,0,0,0.5)\",\n    \"paddingTop\": \"5px\",\n    \"paddingRight\": \"10px\",\n    \"paddingBottom\": \"5px\",\n    \"paddingLeft\": \"10px\",\n    \"color\": \"#ffffff\",\n    \"fontSize\": \"18px\",\n    \"borderBottomLeftRadius\": \"20px\"\n  }\n}","module.exports = {\n  \"type\": \"div\",\n  \"attr\": {},\n  \"classList\": [\n    \"item-container\"\n  ],\n  \"children\": [\n    {\n      \"type\": \"image\",\n      \"attr\": {\n        \"src\": \"/Common/img/ad/icon_gx.png\"\n      },\n      \"style\": {\n        \"width\": \"528px\",\n        \"height\": \"708px\"\n      }\n    },\n    {\n      \"type\": \"image\",\n      \"attr\": {\n        \"src\": \"/Common/img/ad/bt_cpd.png\"\n      },\n      \"style\": {\n        \"width\": \"340px\",\n        \"height\": \"94px\"\n      },\n      \"events\": {\n        \"click\": \"completeAdRSA\"\n      }\n    },\n    {\n      \"type\": \"div\",\n      \"attr\": {},\n      \"shown\": function () {return this.native.isShow},\n      \"classList\": [\n        \"container\"\n      ],\n      \"children\": [\n        {\n          \"type\": \"image\",\n          \"attr\": {\n            \"src\": \"/Common/img/ad/icon_x.png\"\n          },\n          \"classList\": [\n            \"closeImg\"\n          ],\n          \"events\": {\n            \"click\": \"closeAd\"\n          }\n        },\n        {\n          \"type\": \"video\",\n          \"attr\": {\n            \"id\": \"video\",\n            \"src\": function () {return this.native.adVideoSrc},\n            \"autoplay\": \"true\"\n          },\n          \"id\": \"video\",\n          \"shown\": function () {return this.native.isShowVideo},\n          \"events\": {\n            \"click\": function (evt) { return this.reportNativeClick(evt)}\n          },\n          \"classList\": [\n            \"ad-video\"\n          ]\n        },\n        {\n          \"type\": \"stack\",\n          \"attr\": {},\n          \"classList\": [\n            \"stackstyle\"\n          ],\n          \"events\": {\n            \"click\": function (evt) { return this.reportNativeClick(evt)}\n          },\n          \"children\": [\n            {\n              \"type\": \"image\",\n              \"attr\": {\n                \"src\": function () {return this.native.adImgSrc}\n              },\n              \"shown\": function () {return this.native.isShowImg},\n              \"classList\": [\n                \"img\"\n              ]\n            },\n            {\n              \"type\": \"ad-button\",\n              \"attr\": {\n                \"valuetype\": \"0\",\n                \"adunitid\": function () {return this.native.adUnitId},\n                \"adid\": function () {return this.native.adData.adId}\n              },\n              \"classList\": [\n                \"adbtn\"\n              ],\n              \"events\": {\n                \"click\": function (evt) { return this.startButton(evt)}\n              }\n            },\n            {\n              \"type\": \"text\",\n              \"attr\": {\n                \"value\": function () {return '' + (this.native.adData.source) + ' 广告'}\n              },\n              \"classList\": [\n                \"adsource\"\n              ]\n            },\n            {\n              \"type\": \"text\",\n              \"attr\": {\n                \"value\": function () {return this.native.adData.title}\n              },\n              \"classList\": [\n                \"adtitle\"\n              ]\n            }\n          ]\n        }\n      ]\n    }\n  ]\n}","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","\nvar $app_style$ = require(\"!../../../../../Quick App IDE/resources/app/extensions/hap-debugger/node_modules/@hap-toolkit/dsl-xvm/lib/loaders/style-loader.js?index=0&type=style!../../../../../Quick App IDE/resources/app/extensions/hap-debugger/node_modules/@hap-toolkit/dsl-xvm/lib/loaders/fragment-loader.js?index=0&type=style!./index.ux?uxType=page\")\nvar $app_script$ = require(\"!../../../../../Quick App IDE/resources/app/extensions/hap-debugger/node_modules/@hap-toolkit/dsl-xvm/lib/loaders/script-loader.js!../../../../../Quick App IDE/resources/app/extensions/hap-debugger/node_modules/@hap-toolkit/packager/lib/loaders/module-loader.js!../../../../../Quick App IDE/resources/app/extensions/hap-debugger/node_modules/babel-loader/lib/index.js?cwd=d:\\\\quickappWorkspaceAll\\\\com.haituo.setpplanet&cacheDirectory&plugins[]=d:\\\\Quick App IDE\\\\resources\\\\app\\\\extensions\\\\hap-debugger\\\\node_modules\\\\@hap-toolkit\\\\dsl-xvm\\\\lib\\\\loaders\\\\babel-plugin-jsx.js&comments=false&configFile=d:\\\\Quick App IDE\\\\resources\\\\app\\\\extensions\\\\hap-debugger\\\\node_modules\\\\@hap-toolkit\\\\packager\\\\babel.config.js!../../../../../Quick App IDE/resources/app/extensions/hap-debugger/node_modules/@hap-toolkit/dsl-xvm/lib/loaders/access-loader.js!../../../../../Quick App IDE/resources/app/extensions/hap-debugger/node_modules/@hap-toolkit/dsl-xvm/lib/loaders/fragment-loader.js?index=0&type=script!./index.ux?uxType=page\")\n$app_define$('@app-component/index', [], function($app_require$, $app_exports$, $app_module$) {\n     $app_script$($app_module$, $app_exports$, $app_require$)\n        if ($app_exports$.__esModule && $app_exports$.default) {\n          $app_module$.exports = $app_exports$.default\n        }\n    $app_module$.exports.template = require(\"!../../../../../Quick App IDE/resources/app/extensions/hap-debugger/node_modules/@hap-toolkit/dsl-xvm/lib/loaders/template-loader.js!../../../../../Quick App IDE/resources/app/extensions/hap-debugger/node_modules/@hap-toolkit/dsl-xvm/lib/loaders/fragment-loader.js?index=0&type=template!./index.ux?uxType=page&\")\n    $app_module$.exports.style = $app_style$;\n});\n$app_bootstrap$('@app-component/index',{ packagerVersion: QUICKAPP_TOOLKIT_VERSION });"],"names":[],"sourceRoot":""}